= JSON rendering
:toc:

link:/developer_documentation/start.adoc[Back to documentation home]

== JSON rendering

This doc shows which helpers are available in route files to return JSON responses to update the page without reloading.

NOTE: All such actions should call `return_json_response` to set the correct headers.

=== Changing DOM elements

The main helper for this is `json_actions` which receives an array of actions to be carried out in the page and an optional flash message to be displayed.
Each action is of a specific type which tells the calling javascript what to do.

e.g.
[source,ruby]
----
json_actions([OpenStruct.new(type: :replace_multi_options,
                             dom_id: 'product_code_columns_product_code_column_ids',
                             options_array: res.instance[:code]),
              OpenStruct.new(type: :replace_input_value,
                             dom_id: 'product_code_columns_chosen_column_ids',
                             value: ids.join(','))],
             'Re-assigned product columns')
----

==== Actions

