= Grid actions
:toc:

link:/developer_documentation/start.adoc[Back to documentation home]

== Grid actions

Actions provide a context menu of actions that can be associated with a row in a grid.
They are specified in `list` or `search` yaml files.
These appear when the `list` button in the `action` column of a grid row is clicked.
The actions are rendered as a context menu that can include submenu groupings.

=== Example

[source,yaml]
----
:actions:
  - :url: /path/to/resource
    :text: action item text
    :icon: fa-edit
    :title: The dialog title with $:id$ in it
    :popup: true
    :auth:
      :program: program_name
      :permission: required_permission
    :hide_if_null: another_field_id
  - :separator: true
  - submenu:
     :text: Submenu caption
     :items:
       - :url: /path/to/this/resource
----

=== Top-level items

The `:actions:` section is an array of top-level items.
These tiems can be one of:

* An action
* A separator line
* A submenu

=== Actions

An action is a Hash of attributes which is an item in the actions array.

|===
|key |value |description

|:url
|A URL.
|Framework paths start with a `/`. Any value from the grid row can be included in the path by specifying it surrounded by dollar signes and prefixed with a colon. e.g. to include the customer_id in the URL when the link is clicked: `/customers/$:customer_id$`.

|:text
|Link text.
|The text to display for the link. Defaults to `'link'`.

|:icon
|icon's css class name.
a|Currently the system uses FontAwesome icons - e.g.:

* view: fa-eye
* edit: fa-edit
* new: fa-plus-circle
* delete: fa-remove
* list/associations: fa-list
* sort: fa-sort
* restrict: fa-lock

|:popup
|`true` or `false`
|If `true`, the link will be opened in a popup dialog. If `false` or not present, the link will open in a new page.

|:title
|Dialog title.
|Text to show as the caption of a popup dialog. Only makes sense if `:popup` is true. If the text includes a column name within `$:...$` delimiters, that part of the title will be repaced with the column value of the selected row. e.g. `A dialog for grade $:grade$ fruit` would render as `A dialog for grade 1X fruit` if the grade coumn of the current row's value was `1X`.

|:title_field
|Name of a field in the grid.
|The value in the named field of the selected grid row will be used as the popup dialog title.

|:hide_if_null
|Name of a field in the grid.
|The item will not appear if the named field's value is null.

|:hide_if_present
|Name of a field in the grid.
|The item will not appear if the named field's value is NOT null.

|:hide_if_true
|Name of a field in the grid.
|The item will not appear if the named field's value is `true`.

|:hide_if_false
|Name of a field in the grid.
|The item will not appear if the named field's value is `false`.

|:is_delete
|`true` or `false`
|If `true`, a prompt dialog will force the user to choose OK to continue or Cancel. The link will be POSTed to the server with `_method` = `'DELETE'` if the user chooses OK.

|:prompt
|Text - a question to ask the user.
|If present, a prompt dialog will show this text, asking the user to choose OK to continue or Cancel.

|:auth
|A Hash with `:program` and `:permission` keys.
|If the user does not have the required permission, the link will not appear.

|===

=== Separators

Separators take the form of `:separator: true`. The value is irrelevant -- a separator will be rendered if the key `:separator:` is present with any value.

=== Submenus

Submenus are sub-groupings of actions. Submenus have an items array that can contain actions, separators and other submenus.

[source,yaml]
----
:submenu:
  :text: Submenu title         # <1>
  :items:                      # <2>
----
<1> This text appears in the context menu with a right-pointing arrowhead.
<2> Items is an array of items just like under <<Actions>>. These appear to the right of the arrowhead.
