= Non-field Renderers
:toc:

link:/developer_documentation/start.adoc[Back to documentation home]

== Non-field Renderers

The following renderers that do not bind to fields in a form are available:

* <<Link>>
* <<Text>>
* <<SortableList>>
* <<Address>>
* <<ContactMethod>>
* <<Grid>>
* <<Form>>
* <<Table>>
* <<Diff>>

=== Link

This page control displays a link in a page.

|===
|attribute |description |possible values |default

|:text
|The link text
|any text
|None. must be provided.

|:url
|The url to be called.
|a valid endpoint.
|None. must be provided.

|:style
|How the link is styled - as a normal link, or to look like a button.
|`:link` or `:button`.
|`:link`

|:behaviour
|How the link behaves when clicked. Can open the url in a new page, or can open the url in a popup dialog.
|`:popup`.
|n/a

|===

=== Text

This page control places the given text in a div with class `"crossbeams-field"`.

e.g.
[source,ruby]
----
section.add_text('Some text', wrapper: %i[p b])
section.add_text('def a_ruby_method(text)', syntax: :ruby)
----

|===
|attribute |description |possible values |default

|:preformatted
|Display the text within <pre> tags.
|`true` or `false`.
|`false`

|:syntax
|Syntax highlighter to apply to the text.
a|* :ruby
* :sql
* :yaml or :yml
|n/a

|:wrapper
|Tag(s) to wrap the text in. Can be a Symbol or Array of Symbols.
a|* :p
* :h1
* :h2
* :h3
* :h4
* :i or :em
* :b or :strong
|None

|===

=== List

An ordered list of items.

e.g.
[source,ruby]
----
column.add_list([['FP', 1], ['MGP', 2], ['CONS', 3]])
----

|===
|attribute |description |possible values |default

|items
|The list of items to display. If a two-dimensional array is provided, just the first element is displayed.
|a one-dimensional or two-diemnsional array.
|None. Required.

|:caption
|The label text
|any text
|None.

|===

=== SortableList

Render a list of items that can be dragged and dropped to change the sort-order.

e.g.
[source,ruby]
----
form.add_sortable_list('deals', [['FP', 1], ['MGP', 2], ['CONS', 3]])

# access returned parameters:
sorted_id_list = params[:deals_sorted_ids] #=> '1,2,3'
----

|===
|attribute |description |possible values |default

|prefix
|The prefix to be used in identifying this group of items.
|any text starting with a letter, without spaces.
|None. This is required.

|items
|The items to be sorted. The text will be displayed and the ids will be returned in order in a parameter named `"#{prefix}_sorted_ids"`.
|An Array of `[text, id]` elements.
|None. This is required.

|:caption
|A caption to display above the list.
|Any string
|None.

|===

=== Address

This page control renders one or more addresses. Provide a single address entity or an array of address entities.

e.g.

[source,ruby]
----
form.add_address(address)
form.add_address(address_array, include_address_type: false)
----

|===
|attribute |description |possible values |default

|:include_address_type
|Show the type of address in the heading.
|`true` or `false`.
|`true`

|===

=== ContactMethod

This page control renders one or more contact methods. Provide a single contact method entity or an array of contact method entities.
Matches a lowercase version of the contact method's `contact_method_type` to an internal lookup to decide which icon to display. An extra set of lookups can be provided.

e.g.
[source,ruby]
----
form.add_contact_method(contact_method)
form.add_contact_method(contact_method_array, icon_lookup: { 'telephone' => 'tel', 'e-mail' => 'email' })
----

|===
|attribute |description |possible values |default

|:icon_lookup
|Add method_type to icon shortcut for the icons to display next to the method type.
|Each key in the Hash should correspond to a method type and the value should be one of `tel`, `cell`, `fax`, `email`, `social`.
|`{'tel' => 'tel', 'cell' => 'cell', 'fax' => 'fax', 'email' => 'email', 'social' => 'social'}`

|===

=== Grid

Render a data grid. Pass the grid id and the url followed by a hash of options.
If there is more than one grid on a page, each must have a unique grid id.

e.g.
[source,ruby]
----
section.add_grid 'tickets', '/list/tickets', caption: 'Movie tickets', height: 8
----

|===
|attribute |description |possible values |default

|caption
|The caption to be shown in the grid header
|any text.
|None (no caption will be shown in the header).

|height
|The height in css ems of the grid body (excludes the grid header).
|An integer greater than or equal to 6.
|20. If a value less than 6 is given, it will be fixed to 6.

|===

=== Form


=== Table

Render a table. The table renders with thin borders and highlights each row on hover.

e.g.
[source,ruby]
----
section.add_table [{ keys: 'a', values: 1, amounts: 22 },
                   { keys: 'b', values: 2, amounts: 33 }],
                   %i[keys values amounts],
                   alignments: { amounts: :right }
----

|===
|attribute |description |possible values |default

|rows
|Rows containing the data to be shown
|An Array of Hashes of the format `{ column1_name: value, column2_name: value }`.
|None. This is required.

|columns
|An array of column names. Must match names in rows.
|`Symbol` or `String`.
|None (no column headers will be shown).

|options
|A Hash of options
|`alignment: { col: :right }`. The hash should only contain columns that should not be left-aligned. The value for the column can be `:right` or `:center`.
|None.

|===

=== Diff

Display the difference between two texts, two Hashes or two files.

One of the option sets `:left_record` and `:right_record`, `:left` and `:right` or `:left_file` and `:right_file` *must* be provided.

e.g.
[source,ruby]
----
# In the Layout:

section.add_diff :invoice

# In UI Rules:

def common_fields
  {
    invoice: {
      left_caption: 'Before',
      right_caption: 'After',
      left_record: { id: 1, customer: 'AJAX', amount: 100.00 },
      right_record: { id: 1, customer: 'AJAX LTD.', amount: 120.00 }
    }
  }
end

----

|===
|attribute |description |possible values |default

|key
|The key (or field name) matches a key in the `fields` attribute of the UI Rules.
|`Symbol`.
|None. This is required.

|left_caption
|A caption for the left side of the display.
|`String`.
|"Left".

|right_caption
|A caption for the right side of the display.
|`String`.
|"Right".

|left_record
|A `Hash` of atrributes representing one version of a record. Each `key : value` will be compared.
|`Hash`.
|None.

|right_record
|A `Hash` of atrributes representing one version of a record. Each `key : value` will be compared.
|`Hash`.
|None.

|left
|A `String` of text. Each line will be compared.
|`String`.
|None.

|right
|A `String` of text. Each line will be compared.
|`String`.
|None.

|left_file
|A file name.
|`String`.
|None.

|right_file
|A file name.
|`String`.
|None.

|===
